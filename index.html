<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FAQ</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 30px auto;
            padding: 20px;
            background: #f6f7fb;
        }
        h1 {
            text-align: center;
            margin-bottom: 40px;
        }
        .faq-category {
            font-size: 22px;
            font-weight: bold;
            margin: 40px 0 15px;
            padding-bottom: 5px;
            border-bottom: 3px solid #4a55f2;
        }
        .faq-item {
            background: white;
            margin-bottom: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            overflow: hidden;
        }
        .faq-question {
            padding: 16px 20px;
            cursor: pointer;
            background: #eef0fa;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .faq-answer {
            padding: 16px 20px;
            display: none;
            background: white;
            line-height: 1.6;
        }
        .arrow {
            transition: 0.3s;
        }
        .open .arrow {
            transform: rotate(90deg);
        }
    </style>
</head>
<body>

    <h1>FAQ</h1>

    <div id="faq-container">불러오는 중...</div>

    <script>
        const URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRUcyvIj3pi9Sn5nuWNhbg6DIV9OHmy_GFq4s7kuGAUWgPAgryCvGm9y-JayZJ3poIsClH5wLPmhFba/gviz/tq?tqx=out:json&sheet=Sheet1";

        fetch(URL)
            .then(response => response.text())
            .then(text => {
                const json = JSON.parse(text.substr(47).slice(0, -2));
                const rows = json.table.rows;

                let data = {};

                rows.forEach(r => {
                    let category = r.c[0]?.v || "";
                    let question = r.c[1]?.v || "";
                    let answer = r.c[2]?.v || "";

                    if (!category || !question) return;

                    if (!data[category]) data[category] = [];

                    data[category].push({ question, answer });
                });

                let html = "";

                Object.keys(data).forEach(cat => {
                    html += `<div class="faq-category">${cat}</div>`;

                    data[cat].forEach(item => {
                        html += `
                            <div class="faq-item">
                                <div class="faq-question">
                                    ${item.question}
                                    <span class="arrow">▶</span>
                                </div>
                                <div class="faq-answer">${item.answer}</div>
                            </div>
                        `;
                    });
                });

                document.getElementById("faq-container").innerHTML = html;

                const questions = document.querySelectorAll(".faq-question");
                questions.forEach(q => {
                    q.addEventListener("click", () => {
                        const parent = q.parentElement;
                        const answer = q.nextElementSibling;

                        parent.classList.toggle("open");
                        answer.style.display = answer.style.display === "block" ? "none" : "block";
                    });
                });
            })
            .catch(err => {
                document.getElementById("faq-container").innerHTML =
                    "FAQ 데이터를 불러올 수 없습니다.";
                console.error(err);
            });
    </script>

</body>
</html>
