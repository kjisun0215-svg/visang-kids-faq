<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FAQ — 비상교육 스타일</title>
  <style>
    :root{
      --maxw:1100px;
      --accent:#0066cc;
      --muted:#6b7280;
      --bg:#f7f8fb;
      --card:#ffffff;
      --radius:12px;
      --gap:18px;
      font-family: "Noto Sans KR", system-ui, -apple-system, "Segoe UI", Roboto;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#0b1220;line-height:1.55}
    .wrap{max-width:var(--maxw);margin:36px auto;padding:24px}

    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,var(--accent),#48a7ff);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
    h1{font-size:20px;margin:0}
    p.lead{color:var(--muted);margin:4px 0 0;font-size:14px}

    .card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:0 6px 18px rgba(8,25,40,0.06)}

    .search-row{display:flex;gap:12px;align-items:center}
    .search{flex:1;display:flex;gap:8px;align-items:center}
    .search input{flex:1;padding:12px 14px;border-radius:10px;border:1px solid #e6e9ef;background:#fff;font-size:15px}
    .search button{padding:10px 14px;border-radius:10px;border:0;background:var(--accent);color:#fff;font-weight:600;cursor:pointer}

    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
    .tab{padding:8px 12px;border-radius:999px;background:#f1f4f8;color:#263141;font-size:13px;cursor:pointer;border:1px solid transparent}
    .tab.active{background:var(--accent);color:#fff}

    .faq-list{margin-top:18px;display:grid;gap:12px}
    .faq{background:linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.98));padding:14px;border-radius:10px;border:1px solid #eef2f6}
    .faq summary{font-weight:700;list-style:none;cursor:pointer;font-size:15px}
    details[open] summary{color:var(--accent)}
    .faq p{margin:8px 0 0;color:var(--muted)}

    .no-result{text-align:center;padding:36px 12px;color:var(--muted)}

    .help-row{display:flex;justify-content:space-between;align-items:center;margin-top:18px}
    .help-left{color:var(--muted)}
    .call-btn{background:#fff;border:1px solid #e6e9ef;padding:10px 14px;border-radius:10px;font-weight:700}

    footer{margin-top:22px;padding:18px;background:transparent;color:var(--muted);font-size:13px}

    @media (max-width:720px){
      .wrap{padding:16px;margin:10px}
      header{flex-direction:column;align-items:flex-start}
      .search-row{flex-direction:column;align-items:stretch}
      .help-row{flex-direction:column;gap:8px;align-items:flex-start}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">비상</div>
        <div>
          <h1>비상교육 유아 프로그램 FAQ</h1>
          <p class="lead">자주 묻는 질문을 검색하거나 프로그램으로 분류해 빠르게 찾아보세요.</p>
        </div>
      </div>
      <div>
        <button class="call-btn" onclick="location.href='tel:16444115'">고객센터 연결하기 1644-4115</button>
      </div>
    </header>

    <section class="card">
      <div class="search-row">
        <div class="search">
          <input id="q" placeholder="검색어를 입력하세요 (예: 로그인, 콘텐츠)" oninput="updateFilter()" />
          <button onclick="clearSearch()">초기화</button>
        </div>
      </div>

      <div class="tabs" id="tabs"></div>
      <div class="faq-list" id="faqList"></div>
      <div id="noResult" class="no-result" style="display:none">검색 결과가 없습니다.<br/>다른 키워드로 검색해보세요.</div>

      <div class="help-row">
        <div class="help-left">도움말로 해결이 어려우신가요?</div>
        <div><button class="call-btn" onclick="location.href='tel:16444115'">고객센터 연결하기 1644-4115</button></div>
      </div>
    </section>

    <footer>
      <div>이용약관 &nbsp;&nbsp; 개인정보처리방침 &nbsp;&nbsp; 문의하기</div>
      <div style="margin-top:8px;color:var(--muted)">
        (주)비상교육 주소 : 경기도 과천시 과천대로2길 54, 13층 | TEL : 1644-4115
      </div>
    </footer>
  </div>

  <script>
    const SHEET_ID = "1216cKMHKiEbODsAzJeHoJ7Ermrea7_33wNbSEZnMQ1I";
    const SHEET_NAME = encodeURIComponent("시트1"); 
    const API_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;

    let faqs = [];
    let categories = [];
    let activeCategory = "전체";

    async function loadFAQ() {
      const res = await fetch(API_URL);
      const text = await res.text();
      const json = JSON.parse(text.substr(47).slice(0, -2));

      const rows = json.table.rows.map(r => r.c.map(c => c ? c.v : ""));

      faqs = rows.map(r => ({
        category: r[0] || "기타",
        q: r[1] || "",
        a: r[2] || ""
      }));

      categories = ["전체", ...Array.from(new Set(faqs.map(f => f.category)))];

      makeTabs();
      updateFilter();
    }

    function makeTabs() {
      const tabsEl = document.getElementById("tabs");
      tabsEl.innerHTML = "";
      categories.forEach(cat => {
        const el = document.createElement("button");
        el.className = "tab" + (cat === activeCategory ? " active" : "");
        el.innerText = cat;
        el.onclick = () => { activeCategory = cat; updateFilter(); };
        tabsEl.appendChild(el);
      });
    }

    function renderList(items) {
      const faqListEl = document.getElementById("faqList");
      const noResultEl = document.getElementById("noResult");

      faqListEl.innerHTML = "";
      if (items.length === 0) {
        noResultEl.style.display = "block";
        return;
      }
      noResultEl.style.display = "none";

      items.forEach(item => {
        const d = document.createElement("details");
        d.className = "faq";
        d.innerHTML = `<summary>${escapeHtml(item.q)}</summary><p>${escapeHtml(item.a)}</p>`;
        faqListEl.appendChild(d);
      });
    }

    function updateFilter() {
      const q = document.getElementById("q").value.trim().toLowerCase();

      let filtered = faqs.filter(f => {
        const inCat = activeCategory === "전체" || f.category === activeCategory;
        const match = q === "" || (f.q + " " + f.a + " " + f.category).toLowerCase().includes(q);
        return inCat && match;
      });

      makeTabs();
      renderList(filtered);
    }

    function clearSearch() {
      document.getElementById("q").value = "";
      updateFilter();
    }

    function escapeHtml(s){
      return String(s)
        .replace(/&/g,"&amp;")
        .replace(/</g,"&lt;")
        .replace(/>/g,"&gt;");
    }

    loadFAQ();
  </script>
</body>
</html>
